<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">

  <title>Pygame Zero Intermediate</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            Pygame Zero Intermediate
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">This course teaches intermediate game development using Pygame Zero.</div>
            <p>Introductions</p><ul><a href="../10-Intro/10-before.html"><li >Before you begin...</li></a></ul><p>Vertical Shooter</p><ul><a href="../20-Vertical/10-twin.html"><li >TwinBee</li></a><a href="../20-Vertical/20-player.html"><li >Player Ship</li></a><a href="../20-Vertical/30-moving.html"><li >Moving the Ship</li></a><a href="../20-Vertical/40-bullets.html"><li >Player Bullets</li></a><a href="../20-Vertical/50-background.html"><li class="current">Background</li></a><a href="../20-Vertical/60-music.html"><li >Music and Sound</li></a><a href="../20-Vertical/70-enemies.html"><li >Enemies</li></a><a href="../20-Vertical/80-destroy.html"><li >Destroying Enemies</li></a><a href="../20-Vertical/90-enemyBullets.html"><li >Enemy Bullets</li></a><a href="../20-Vertical/100-powerup.html"><li >Power Ups</li></a><a href="../20-Vertical/110-moreBullets.html"><li >Power Up: More Bullets</li></a><a href="../20-Vertical/120-drone.html"><li >Power Up: Drone</li></a><a href="../20-Vertical/130-gameover.html"><li >Game Over</li></a><a href="../20-Vertical/140-score.html"><li >Keeping Score</li></a><a href="../20-Vertical/150-challenges.html"><li >Challenges and Bugs</li></a><a href="../20-Vertical/160-sample.html"><li >Completed Game Sample</li></a></ul>
        </nav>
        <div id="content">
            <h1>Background</h1>
<p>Again, we'll be using Vectr to draw. We will need <strong>at least</strong> one background image. Having more images can make for a more interesting background.</p>
<p>When drawing the background, make sure that the page is set to 800px by 600px.</p>
<p>This is the background that I've drawn...</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/background1.png" /></p>
<p>In creating this background, I used a few new techniques in Vectr. I'll demonstrate it using the tree as an example.</p>
<h3>Tree</h3>
<p>The tree was created using a few ellipses overlapping one another...</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree.png" /></p>
<p>I edited the bottom point of the outer most ellipse to make the bottom a bit flatter. That's similar to how we edited the body of the player ship.</p>
<p>Next, I added the tree trunk. Since this isn't a regular shape, I've drawn it using the pen tool. But if you prefer, you can choose to make the truck a simple rectangle.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree2.png" /></p>
<h3>Shadow</h3>
<p>To create the shadow, I first make a <strong>duplicate</strong> of the tree, then I selected the <strong>Unite / Add</strong> option to combine all the shapes into one.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree3.png" /></p>
<p>Next, I rotated the shadow. To rotate an object, just move your mouse cursor slighly below the bottom-most point. After rotation, I flattened it a little.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree4.png" /></p>
<p>Shadows makes everything look darker. To create that effect, we'll set the color to pure black and reduce the opacity.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree5.png" /></p>
<p>Finally, we move the shadow to a suitable position, then shift it behind the tree by clicking on the "Send to back" button.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree6.png" /></p>
<p>You may need to click it multiple times to get it positioned correctly. The completed tree looks like this...</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/tree7.png" /></p>
<h3>Multiple-backgrounds</h3>
<p>Once you have a single tree, you can group the parts together and duplicate it to create an entire forest. You can reuse the houses, roads, and whatever-you-have-in-your-background to easily create multiple versions of the background image. Here's another two more that I've created.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/background2.png" /></p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/background3.png" /></p>
<p><strong>Draw your own background!</strong> You need at least one, but if you have time, you should try and draw more. If you are running behind on time (...maybe you missed a class?), you can right-click on these images, save them to file, and use them in your game.</p>
<h3>Exporting</h3>
<p>To use your image in your game, you'll need to export it.</p>
<p><strong>Important: We will export the image twice!</strong></p>
<p>This time we'll be exporting the entire page, so you won't need to select anything. Just click the <strong>"Export"</strong> button.</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/export.png" /></p>
<h3>SVG</h3>
<p>First, we'll export it to SVG format.
Change the settings to <strong>Page</strong> and <strong>SVG</strong>, make sure the width and height are 800px by 600px, then click <strong>"Download"</strong>".</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/export-1.png" /></p>
<p>Drag the downloaded file from your browser into your your game's images folder.</p>
<p>The SVG format won't be directly used in your game, but will be used if you need to edit your background in the future.</p>
<h3>PNG</h3>
<p>Next, change the settings to <strong>Selection</strong> and <strong>PNG</strong>, then click <strong>"Download"</strong>".</p>
<p><img alt="" src="https://www.aposteriori.com.sg/wp-content/uploads/2021/01/export2.png" /></p>
<p>Again, drag the downloaded file from your browser into your your game's images folder.</p>
<p>Make sure you change the names of both the svg and png files to something suitable.
<strong>The filenames must not contain spaces, capital letters, or special characters other than underscore.</strong>
In this case, I would recommend using "background" as a filename.</p>
<h1>Scrolling Background</h1>
<p>We are going to create a scrolling background. This means that the background will continuously move from top to bottom, making it look like the ship is flying.</p>
<h3>Adding background</h3>
<p>If we try to do this with just one background actor, the actor will not be able to cover the screen all of the time. So we'll need at two actors. Just like with bullets, if we have more than one actor, we'll start by creating a list for it.</p>
<div class="codehilite"><pre><span></span><code>backgrounds = []
</code></pre></div>

<p>Since I have 3 background images, I'll create a list for the images filenames as well.</p>
<div class="codehilite"><pre><span></span><code>background_images = [&#39;background1&#39;,&#39;background2&#39;,&#39;background3&#39;]
</code></pre></div>

<p>I will be using the <code>random</code> module to help me randomly select a background image, so we'll need to import <code>random</code>...</p>
<div class="codehilite"><pre><span></span><code>import random
</code></pre></div>

<p>Next, we'll create two actors for the background and add them to the list.</p>
<div class="codehilite"><pre><span></span><code>background = Actor(random.choice(background_images))
background.x = 400
background.y = 300
backgrounds.append(background)
background = Actor(random.choice(background_images))
background.x = 400
background.y = -300
backgrounds.append(background)
</code></pre></div>

<p>The first actor is placed right at the center of the screen, while the second actor is placed directly above it. The <code>random.choice</code> function is used to randomly select a filename from the list of background filenames.</p>
<p><strong>random.choice(background_images)</strong> : Randomly select one item from the <code>background_images</code> list and returns it.</p>
<h3>Making it move</h3>
<p>To move the background downwards, we need to increase its y position in the <code>update</code> function...</p>
<div class="codehilite"><pre><span></span><code>for background in backgrounds:
    background.y += 3
</code></pre></div>

<p>But it shouldn't just keep going down forever. Once it exits the screen from the bottom, we should return it to the top.</p>
<div class="codehilite"><pre><span></span><code>for background in backgrounds:
    background.y += 3
    if background.y &gt; 900:
        background.y -= 1200
        background.image = random.choice(background_images)
</code></pre></div>

<p>I'm also changing the image to a random background image whenever it returns to the top. Not necessary, but it makes the background look more varied.</p>
<h3>Drawing the background</h3>
<p>As always, you have to tell Pygame Zero to draw the background, or you'll never see it.</p>
<div class="codehilite"><pre><span></span><code>for background in backgrounds:
    background.draw()
````

You can also remove the ```screen.clear()```. We won&#39;t need it anymore, as the background will be redrawn over the entire screen each frame, so there is no need to clear the old images from the screen.

At this point...
===
At the end of these, your program should look like this...
</code></pre></div>

<p>import pgzrun
import random
from pgzhelper import *</p>
<p>WIDTH=800
HEIGHT=600</p>
<p>player = Actor('player')
player.x = 400
player.y = 500</p>
<p>bullets = []
bullet_delay = 0</p>
<p>background_images = ['background1','background2','background3']
backgrounds = []
background = Actor(random.choice(background_images))
background.x = 400
background.y = 300
backgrounds.append(background)
background = Actor(random.choice(background_images))
background.x = 400
background.y = -300
backgrounds.append(background)</p>
<p>def update():
    global bullet_delay</p>
<div class="codehilite"><pre><span></span><code>if keyboard.up:
    player.y -= 5
if keyboard.down:
    player.y += 5
if keyboard.right:
    player.x += 5
if keyboard.left:
    player.x -= 5

if player.x &lt; 25:
    player.x = 25
if player.x &gt; 775:
    player.x = 775
if player.y &lt; 30:
    player.y = 30
if player.y &gt; 570:
    player.y = 570

if keyboard.space and bullet_delay == 0:
    bullet_delay = 5
    bullet = Actor(&#39;player_bullet&#39;)
    bullet.x = player.x
    bullet.y = player.y
    bullet.angle = 90
    bullets.append(bullet)

if bullet_delay &gt; 0:
    bullet_delay -= 1

for bullet in bullets:
    bullet.move_forward(15)
    if bullet.y &lt; 0:
        bullets.remove(bullet)

for background in backgrounds:
    background.y += 3
    if background.y &gt; 900:
        background.y -= 1200
        background.image = random.choice(background_images)
</code></pre></div>

<p>def draw():
    for background in backgrounds:
        background.draw()
    player.draw()
    for bullet in bullets:
        bullet.draw()</p>
<p>pgzrun.go() # Must be last line</p>
<p>```</p>
        </div>
        <button type="button" id="hamburger"><i class="fa fa-bars"></i></button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });

            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        });
    </script>
</body>
</html>