<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>Pygame Zero Intermediate</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            Pygame Zero Intermediate
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">This course teaches intermediate game development using Pygame Zero.</div>
            <p>Introductions</p><ul><a href="../10-Intro/10-before.html"><li >Before you begin...</li></a></ul><p>Vertical Shooter</p><ul><a href="../20-Vertical/10-twin.html"><li >TwinBee</li></a><a href="../20-Vertical/20-player.html"><li >Player Ship</li></a><a href="../20-Vertical/30-moving.html"><li >Moving the Ship</li></a><a href="../20-Vertical/40-bullets.html"><li >Player Bullets</li></a><a href="../20-Vertical/50-background.html"><li >Background</li></a><a href="../20-Vertical/60-music.html"><li >Music and Sound</li></a><a href="../20-Vertical/70-enemies.html"><li >Enemies</li></a><a href="../20-Vertical/80-destroy.html"><li >Destroying Enemies</li></a><a href="../20-Vertical/90-enemyBullets.html"><li >Enemy Bullets</li></a><a href="../20-Vertical/100-powerup.html"><li >Power Ups</li></a><a href="../20-Vertical/110-moreBullets.html"><li >Power Up: More Bullets</li></a><a href="../20-Vertical/120-drone.html"><li >Power Up: Drone</li></a><a href="../20-Vertical/130-gameover.html"><li >Game Over</li></a><a href="../20-Vertical/140-score.html"><li class="current">Keeping Score</li></a><a href="../20-Vertical/150-challenges.html"><li >Challenges and Bugs</li></a><a href="../20-Vertical/160-sample.html"><li >Completed Game Sample</li></a></ul>
        </nav>
        <div id="content">
            <h1>Keeping Score</h1>
<p>Let's keep a score, so we can compare and see who's the better player! Start by adding a <code>score</code> variable.</p>
<div class="codehilite"><pre><span></span><code><span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

<p>I'm programming in two ways to gain score...</p>
<ul>
<li>Destroy enemy: 10 points</li>
<li>Pickup chocolate donuts: 100 points</li>
<li>No points for matcha and strawberry donuts, as you already get powerups for them.</li>
</ul>
<p>Look for this code in your program...</p>
<div class="codehilite"><pre><span></span><code><span class="n">explosions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">explosion</span><span class="p">)</span>
<span class="n">enemies</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">enemies</span><span class="p">[</span><span class="n">hit</span><span class="p">])</span>
</code></pre></div>

<p>...and add code for increasing the score...</p>
<div class="codehilite"><pre><span></span><code><span class="n">explosions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">explosion</span><span class="p">)</span>
<span class="n">enemies</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">enemies</span><span class="p">[</span><span class="n">hit</span><span class="p">])</span>
<span class="n">score</span> <span class="o">+=</span> <span class="mi">10</span>
</code></pre></div>

<p>For the chocolate donuts, look for this code...</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">image</span> <span class="o">==</span> <span class="s1">&#39;powerup2&#39;</span><span class="p">:</span>
    <span class="n">powerup1</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">elif</span> <span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">image</span> <span class="o">==</span> <span class="s1">&#39;powerup3&#39;</span><span class="p">:</span>
    <span class="n">powerup2</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>

<p>...and change it to this...</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">image</span> <span class="o">==</span> <span class="s1">&#39;powerup2&#39;</span><span class="p">:</span>
    <span class="n">powerup1</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">elif</span> <span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">image</span> <span class="o">==</span> <span class="s1">&#39;powerup3&#39;</span><span class="p">:</span>
    <span class="n">powerup2</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">score</span> <span class="o">+=</span> <span class="mi">100</span>
</code></pre></div>

<p>We are changing <code>score</code>  from inside the <code>update()</code> function, so don't forget to declare it as global.</p>
<div class="codehilite"><pre><span></span><code><span class="k">global</span> <span class="n">bullet_delay</span><span class="p">,</span> <span class="n">powerup1</span><span class="p">,</span> <span class="n">powerup2</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">score</span>
</code></pre></div>

<h1>Displaying the score</h1>
<p>We can draw the score the same way we did in space gems, by adding a <code>screen.draw.text()</code> fuction in <code>draw()</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="n">screen</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</code></pre></div>

<p>Remember that <code>score</code> is an integer, so we'll need to change it to a str by using <code>str()</code>.</p>
<h1>At this Point</h1>
<p>You game is now complete! Sort of... No program is ever truly complete, as you can always add more features or improve on it. Take a look at the challenges section to find some ideas on how to improve your game.</p>
<p>Your program should now look like this...</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">pgzrun</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">pgzhelper</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">WIDTH</span><span class="o">=</span><span class="mi">800</span>
<span class="n">HEIGHT</span><span class="o">=</span><span class="mi">600</span>

<span class="n">player</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player&#39;</span><span class="p">)</span>
<span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">500</span>

<span class="n">drone</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;drone&#39;</span><span class="p">)</span>

<span class="n">game_over</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;game_over&#39;</span><span class="p">)</span>
<span class="n">game_over</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">game_over</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">300</span>

<span class="n">game_state</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">bullets</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">bullet_delay</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">background_images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;background1&#39;</span><span class="p">,</span><span class="s1">&#39;background2&#39;</span><span class="p">,</span><span class="s1">&#39;background3&#39;</span><span class="p">]</span>
<span class="n">backgrounds</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">background</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">background_images</span><span class="p">))</span>
<span class="n">background</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">background</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">backgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">background</span><span class="p">)</span>
<span class="n">background</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">background_images</span><span class="p">))</span>
<span class="n">background</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">background</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">300</span>
<span class="n">backgrounds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">background</span><span class="p">)</span>

<span class="n">enemies</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">explosions</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">enemy_bullets</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">powerups</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">powerup_images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;powerup1&#39;</span><span class="p">,</span> <span class="s1">&#39;powerup2&#39;</span><span class="p">,</span> <span class="s1">&#39;powerup3&#39;</span><span class="p">]</span>
<span class="n">powerup1</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">powerup2</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">sounds</span><span class="o">.</span><span class="n">main_theme</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">shoot</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">bullet_delay</span>

    <span class="n">sounds</span><span class="o">.</span><span class="n">sfx_sounds_interaction25</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
    <span class="n">bullet_delay</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="k">if</span> <span class="n">powerup1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">powerup1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">15</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">15</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">powerup1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">110</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">70</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">powerup1</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">110</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">15</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">15</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">70</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">powerup1</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">115</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">80</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">65</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">powerup2</span><span class="p">:</span>
        <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;player_bullet&#39;</span><span class="p">)</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">drone</span><span class="o">.</span><span class="n">x</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">drone</span><span class="o">.</span><span class="n">y</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">bullet_delay</span><span class="p">,</span> <span class="n">powerup1</span><span class="p">,</span> <span class="n">powerup2</span><span class="p">,</span> <span class="n">game_state</span><span class="p">,</span> <span class="n">score</span>

    <span class="k">if</span> <span class="n">keyboard</span><span class="o">.</span><span class="n">up</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">5</span>
    <span class="k">if</span> <span class="n">keyboard</span><span class="o">.</span><span class="n">down</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">5</span>
    <span class="k">if</span> <span class="n">keyboard</span><span class="o">.</span><span class="n">right</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mi">5</span>
    <span class="k">if</span> <span class="n">keyboard</span><span class="o">.</span><span class="n">left</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">-=</span> <span class="mi">5</span>

    <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">25</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">775</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">775</span>
    <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">570</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">570</span>

    <span class="n">drone</span><span class="o">.</span><span class="n">move_towards</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">keyboard</span><span class="o">.</span><span class="n">space</span> <span class="ow">and</span> <span class="n">bullet_delay</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">game_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">shoot</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">bullet_delay</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bullet_delay</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="n">bullets</span><span class="p">:</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">move_forward</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bullets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">background</span> <span class="ow">in</span> <span class="n">backgrounds</span><span class="p">:</span>
        <span class="n">background</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">3</span>
        <span class="k">if</span> <span class="n">background</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">900</span><span class="p">:</span>
            <span class="n">background</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1200</span>
            <span class="n">background</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">background_images</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">980</span><span class="p">:</span>
        <span class="n">enemy</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;enemy1_1&#39;</span><span class="p">)</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;enemy1_1&#39;</span><span class="p">,</span> <span class="s1">&#39;enemy1_2&#39;</span><span class="p">]</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">50</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">700</span><span class="p">)</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="p">)</span>
        <span class="n">enemies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">enemy</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">998</span><span class="p">:</span>
        <span class="n">powerup</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;powerup1&#39;</span><span class="p">)</span>
        <span class="n">powerup</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">50</span>
        <span class="n">powerup</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">700</span><span class="p">)</span>
        <span class="n">powerups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">powerup</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">powerup</span> <span class="ow">in</span> <span class="n">powerups</span><span class="p">:</span>
        <span class="n">powerup</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">4</span>

    <span class="k">for</span> <span class="n">enemy</span> <span class="ow">in</span> <span class="n">enemies</span><span class="p">:</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">move_in_direction</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">animate</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">990</span><span class="p">:</span>
            <span class="n">bullet</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;enemy_bullet&#39;</span><span class="p">)</span>
            <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">enemy</span><span class="o">.</span><span class="n">x</span>
            <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">enemy</span><span class="o">.</span><span class="n">y</span>
            <span class="n">bullet</span><span class="o">.</span><span class="n">angle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">359</span><span class="p">)</span>
            <span class="n">enemy_bullets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">enemy</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">700</span><span class="p">:</span>
            <span class="n">enemies</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">enemy</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="n">bullets</span><span class="p">:</span>
        <span class="n">hit</span> <span class="o">=</span> <span class="n">bullet</span><span class="o">.</span><span class="n">collidelist</span><span class="p">(</span><span class="n">enemies</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">hit</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">bullets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>
            <span class="n">explosion</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;explosion1&#39;</span><span class="p">)</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">enemies</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">x</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">enemies</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">y</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;explosion1&#39;</span><span class="p">,</span> <span class="s1">&#39;explosion2&#39;</span><span class="p">]</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="mi">8</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">life</span> <span class="o">=</span> <span class="mi">15</span>
            <span class="n">explosions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">explosion</span><span class="p">)</span>
            <span class="n">enemies</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">enemies</span><span class="p">[</span><span class="n">hit</span><span class="p">])</span>
            <span class="n">score</span> <span class="o">+=</span> <span class="mi">10</span>

    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="n">enemy_bullets</span><span class="p">:</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">move_forward</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">bullet</span><span class="o">.</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">800</span> <span class="ow">or</span> <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">bullet</span><span class="o">.</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">600</span><span class="p">:</span>
            <span class="n">enemy_bullets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">bullet</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">explosion</span> <span class="ow">in</span> <span class="n">explosions</span><span class="p">:</span>
        <span class="n">explosion</span><span class="o">.</span><span class="n">animate</span><span class="p">()</span>
        <span class="n">explosion</span><span class="o">.</span><span class="n">life</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">explosion</span><span class="o">.</span><span class="n">life</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">explosions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">explosion</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">powerup</span> <span class="ow">in</span> <span class="n">powerups</span><span class="p">:</span>
        <span class="n">hit</span> <span class="o">=</span> <span class="n">powerup</span><span class="o">.</span><span class="n">collidelist</span><span class="p">(</span><span class="n">bullets</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">hit</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">powerup</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">40</span>
            <span class="n">powerup</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">powerup_images</span><span class="p">)</span>
            <span class="n">bullets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">bullets</span><span class="p">[</span><span class="n">hit</span><span class="p">])</span>

    <span class="n">hit</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">collidelist</span><span class="p">(</span><span class="n">powerups</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">hit</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">game_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">sounds</span><span class="o">.</span><span class="n">sfx_sounds_fanfare3</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">image</span> <span class="o">==</span> <span class="s1">&#39;powerup2&#39;</span><span class="p">:</span>
            <span class="n">powerup1</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">]</span><span class="o">.</span><span class="n">image</span> <span class="o">==</span> <span class="s1">&#39;powerup3&#39;</span><span class="p">:</span>
            <span class="n">powerup2</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">+=</span> <span class="mi">100</span>
        <span class="n">powerups</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">powerups</span><span class="p">[</span><span class="n">hit</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">game_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">player</span><span class="o">.</span><span class="n">collidelist</span><span class="p">(</span><span class="n">enemy_bullets</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">player</span><span class="o">.</span><span class="n">collidelist</span><span class="p">(</span><span class="n">enemies</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">game_state</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">explosion</span> <span class="o">=</span> <span class="n">Actor</span><span class="p">(</span><span class="s1">&#39;explosion1&#39;</span><span class="p">)</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">x</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">y</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;explosion1&#39;</span><span class="p">,</span> <span class="s1">&#39;explosion2&#39;</span><span class="p">]</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="mi">8</span>
            <span class="n">explosion</span><span class="o">.</span><span class="n">life</span> <span class="o">=</span> <span class="mi">100</span>
            <span class="n">explosions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">explosion</span><span class="p">)</span>
            <span class="n">sounds</span><span class="o">.</span><span class="n">main_theme</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
            <span class="n">sounds</span><span class="o">.</span><span class="n">sfx_exp_medium12</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
            <span class="n">sounds</span><span class="o">.</span><span class="n">subdued_theme</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">draw</span><span class="p">():</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">background</span> <span class="ow">in</span> <span class="n">backgrounds</span><span class="p">:</span>
        <span class="n">background</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">explosion</span> <span class="ow">in</span> <span class="n">explosions</span><span class="p">:</span>
        <span class="n">explosion</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="n">enemy_bullets</span><span class="p">:</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">enemy</span> <span class="ow">in</span> <span class="n">enemies</span><span class="p">:</span>
        <span class="n">enemy</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">powerup</span> <span class="ow">in</span> <span class="n">powerups</span><span class="p">:</span>
        <span class="n">powerup</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">powerup2</span><span class="p">:</span>
        <span class="n">drone</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">game_state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">player</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">bullet</span> <span class="ow">in</span> <span class="n">bullets</span><span class="p">:</span>
        <span class="n">bullet</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">screen</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">game_state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">game_over</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="n">pgzrun</span><span class="o">.</span><span class="n">go</span><span class="p">()</span> <span class="c1"># Must be last line</span>
</code></pre></div>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });

            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        });
    </script>
</body>
</html>