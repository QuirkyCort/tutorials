<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>IoTy Documentation</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            IoTy Documentation
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">Internet-of-Things made easy</div>
            <p class="sectionTitle close" data-section="IntrotoIoTy"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Intro to IoTy</p><ul class="IntrotoIoTy hide"><a href="../10-Introduction/10-Intro.html"><li >Introduction</li></a><a href="../10-Introduction/20-First-Program.html"><li >First Program</li></a><a href="../10-Introduction/30-Connection-Modes.html"><li >Connection Modes</li></a><a href="../10-Introduction/40-Monitor.html"><li >Monitor</li></a></ul><p class="sectionTitle close" data-section="BasicFeaturesGPIO"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Basic Features (GPIO)</p><ul class="BasicFeaturesGPIO hide"><a href="../20-Basics-GPIO/10-GPIO-Pins.html"><li >GPIO Pins</li></a><a href="../20-Basics-GPIO/20-Analog-Read-and-Write.html"><li >Analog Read and Write</li></a><a href="../20-Basics-GPIO/30-Servo.html"><li >Servo</li></a><a href="../20-Basics-GPIO/40-Ultrasonic-Distance.html"><li >Ultrasonic Distance (HC-SR04)</li></a><a href="../20-Basics-GPIO/99-Python-Docs---pin.html"><li >Python Docs - pin</li></a></ul><p class="sectionTitle close" data-section="ExtensionsSoftware"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Extensions (Software)</p><ul class="ExtensionsSoftware hide"><a href="../100-Extensions_Software/10-urequests.html"><li >HTTP Requests (urequests)</li></a><a href="../100-Extensions_Software/20-EZ-ESP-NOW.html"><li >EZ ESP-NOW</li></a><a href="../100-Extensions_Software/30-EZ-HTTPD.html"><li >EZ HTTP (Web Server)</li></a><a href="../100-Extensions_Software/40-non-block.html"><li >Non-Blocking Read</li></a><a href="../100-Extensions_Software/50-EZ-Timer.html"><li >EZ Timer</li></a><a href="../100-Extensions_Software/60-tween.html"><li >Tween</li></a><a href="../100-Extensions_Software/70-BLE-HID.html"><li >Bluetooth Low Energy Human Interface Device</li></a></ul><p class="sectionTitle close" data-section="ExtensionsHardware"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Extensions (Hardware)</p><ul class="ExtensionsHardware hide"><a href="../110-Extensions_Hardware/10-Gyro.html"><li >Gyro (MPU-6050)</li></a><a href="../110-Extensions_Hardware/20-Servo-driver.html"><li >Servo Driver (PCA9685)</li></a><a href="../110-Extensions_Hardware/30-SSD1306.html"><li >OLED Screen (SSD1306 / SH1106)</li></a><a href="../110-Extensions_Hardware/40-Neopixel.html"><li >Neopixel (WS2812 LEDs)</li></a><a href="../110-Extensions_Hardware/50-I2C-LCD.html"><li >I2C LCD (HD44780 + PCF8574)</li></a><a href="../110-Extensions_Hardware/60-DHT11.html"><li >Temperature and Humidity (DHT11, DHT22, AM2302)</li></a><a href="../110-Extensions_Hardware/70-EZ-DS18X20.html"><li >Temperature Sensor (DS18S20, DS18B20)</li></a><a href="../110-Extensions_Hardware/80-GPS.html"><li >GPS (NMEA over serial)</li></a><a href="../110-Extensions_Hardware/90-hx711.html"><li >Analog-to-Digital (HX711)</li></a><a href="../110-Extensions_Hardware/100-hx710.html"><li >Analog-to-Digital (HX710)</li></a><a href="../110-Extensions_Hardware/110-MFRC522.html"><li >RFID Reader (MFRC522)</li></a><a href="../110-Extensions_Hardware/120-Magnetic-Sensor.html"><li >Magnetic Sensor (QMC5883L, HMC5883L)</li></a><a href="../110-Extensions_Hardware/130-Barometric-Pressure.html"><li >Barometric Pressure (BMP280, BME280)</li></a><a href="../110-Extensions_Hardware/140-Heart-Rate.html"><li >Heart Rate Sensor (MAX30102)</li></a><a href="../110-Extensions_Hardware/150-ToF.html"><li >Laser Ranging (VL53L0X, VL52L1X)</li></a><a href="../110-Extensions_Hardware/160-rtc-ds3231.html"><li >Real-Time Clock (DS3231)</li></a><a href="../110-Extensions_Hardware/170-apds9960.html"><li >Light, Proximity, Gesture (APDS9960)</li></a><a href="../110-Extensions_Hardware/180-gy33_i2c.html"><li >Color Sensor (GY-33, I2C)</li></a><a href="../110-Extensions_Hardware/190-gy33_uart.html"><li >Color Sensor (GY-33, UART)</li></a><a href="../110-Extensions_Hardware/200-tcs3472.html"><li >Color Sensor (TCS3472)</li></a><a href="../110-Extensions_Hardware/210-max6675.html"><li >Thermocouple Board (MAX6675)</li></a><a href="../110-Extensions_Hardware/220-encoder.html"><li >Incremental Encoder</li></a><a href="../110-Extensions_Hardware/230-husky-lens.html"><li >Husky Lens</li></a><a href="../110-Extensions_Hardware/250-music.html"><li >Music</li></a><a href="../110-Extensions_Hardware/260-Scaled-Text.html"><li >Scaled Text</li></a><a href="../110-Extensions_Hardware/270-PNG-decoder.html"><li >PNG Decoder</li></a><a href="../110-Extensions_Hardware/280-BMP-Image.html"><li >BMP Image</li></a><a href="../110-Extensions_Hardware/290-serial-mp3.html"><li >Serial MP3 Player (YX5300, YX6300)</li></a><a href="../110-Extensions_Hardware/300-ld2410.html"><li class="current">Human Presence Radar (LD2410)</li></a></ul><p class="sectionTitle close" data-section="OthersComponents"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Others Components</p><ul class="OthersComponents hide"><a href="../200-Others/10-hbridge.html"><li >Intro to H-Bridge</li></a><a href="../200-Others/12-hbridgeControl2Pins.html"><li >Controlling a H-Bridge (2 pins)</li></a><a href="../200-Others/14-hbridgeControl3Pins.html"><li >Controlling a H-Bridge (3 pins)</li></a></ul>
        </nav>
        <div id="content">
            <h1>Human Presence Radar (LD2410)</h1>
<p><img alt="" src="images/ld2410.webp" /></p>
<p>The LD2410 uses a 24GHz radar to detect the presence of people.
Unlike Infrared or Ultrasonic sensors, it can detect both moving and stationary people, and provide an approximate range.</p>
<p>This can be useful to detect when someone is in a room or near to your device.</p>
<h2>Pins</h2>
<p><img alt="" src="images/ld2410_pinout.webp" /></p>
<table>
<thead>
<tr>
<th>Pin</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCC</td>
<td>Power for the sensor (5V). If your device is on USB power, you can use the 5V from <strong>VIN</strong>, else you'll need to provide a separated 5V power supply for it.</td>
</tr>
<tr>
<td>GND</td>
<td>Ground pin. This should be connected to the <strong>GND</strong> pin on the ESP32.</td>
</tr>
<tr>
<td>TX</td>
<td>Data transmit. This should be connected to the UART <strong>RX</strong> pin on the ESP32 (default is Pin 5).</td>
</tr>
<tr>
<td>RX</td>
<td>Data receive. This should be connected to the UART <strong>TX</strong> pin on the ESP32 (default is Pin 4).</td>
</tr>
<tr>
<td>OUT</td>
<td>Optionally provides a present / not-present signal.</td>
</tr>
</tbody>
</table>
<div class="info">
The LD2410S supports 3.3V power. It can be an option if 5V is not available in your project, but note that its stationary detection range is shorter than the other LD2410 versions.
</div>

<h2>Wiring</h2>
<p><img alt="" src="images/ld2410_wiring.webp" /></p>
<h2>Code</h2>
<p>This code will return the full detection data as a list.</p>
<div class="important">
The default baudrate for the LD2410 is 256000. You must initialize your UART device accordingly.
</div>

<h3>Blocks</h3>
<p><img alt="" src="images/ld2410_blocks.webp" /></p>
<h3>Python</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">ld2410</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">uart1</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">UART</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">256000</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">rx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ld2410_device</span> <span class="o">=</span> <span class="n">ld2410</span><span class="o">.</span><span class="n">LD2410</span><span class="p">(</span><span class="n">uart1</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">ld2410_device</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ld2410_device</span><span class="o">.</span><span class="n">get_target_data</span><span class="p">())</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<h3>Results</h3>
<p>The result will be printed to the monitor as a list every one second.
The list contains; "state, moving target dist (cm), moving target energy, stationary target dist (cm), stationary target energy, detection distance".
The meaning of these are...</p>
<ul>
<li>
<p><strong>state</strong> 0: None, 1: Moving target, 2: Stationary target, 3: Both targets.</p>
</li>
<li>
<p><strong>moving target dist</strong> Distance (cm) at which a moving target was detected.</p>
</li>
<li>
<p><strong>moving target energy</strong> The detection confidence level, between 0 (low confidence) to 100 (very confident).</p>
</li>
<li>
<p><strong>stationary target dist</strong> Distance (cm) at which a stationary target was detected.</p>
</li>
<li>
<p><strong>stationary target energy</strong> The detection confidence level, between 0 (low confidence) to 100 (very confident).</p>
</li>
<li>
<p><strong>detection distance</strong> I don't know what this means.</p>
</li>
</ul>
<p>Try moving around and staying stationary at different ranges and observe the changes in the printed values.</p>
<h1><code>class LD2401</code> - control LD2410 Human Presence Radar</h1>
<div class="custom_lib_docs">
<h2>Constructors</h2>
<h3>ld2410.LD2410(uart)</h3>
<p>Creates a LD2410 object.</p>
<p>The arguments are:</p>
<ul>
<li><code>uart</code> A UART object.</li>
</ul>
<p>Returns a <code>LD2410</code> object.</p>
<h2>Gates</h2>
<p>The returned data and settings often refers to <strong>gates</strong>, which represent a distance range.
Each gate has a energy level threshold for detecting movement and stationary presence.</p>
<table>
<thead>
<tr>
<th>Gate</th>
<th>Distance</th>
<th>Move threshold</th>
<th>Stationary threshold</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0cm</td>
<td>50</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0 to 75cm</td>
<td>50</td>
<td>0</td>
</tr>
<tr>
<td>2</td>
<td>75 to 150cm</td>
<td>40</td>
<td>40</td>
</tr>
<tr>
<td>3</td>
<td>150 to 225cm</td>
<td>30</td>
<td>40</td>
</tr>
<tr>
<td>4</td>
<td>225 to 300cm</td>
<td>20</td>
<td>30</td>
</tr>
<tr>
<td>5</td>
<td>300 to 375cm</td>
<td>15</td>
<td>30</td>
</tr>
<tr>
<td>6</td>
<td>375 to 450cm</td>
<td>15</td>
<td>20</td>
</tr>
<tr>
<td>7</td>
<td>450 to 525cm</td>
<td>15</td>
<td>20</td>
</tr>
<tr>
<td>8</td>
<td>525 to 600cm</td>
<td>15</td>
<td>20</td>
</tr>
</tbody>
</table>
<h2>Methods</h2>
<h3>LD2410.update()</h3>
<p>Reads data from the sensor.
You must run this frequently.</p>
<p>Returns <code>None</code>.</p>
<h3>LD2410.get_target_data()</h3>
<p>Get the target data.</p>
<p>Returns a list containing "state, moving target dist (cm), moving target energy, stationary target dist (cm), stationary target energy, detection distance".
The meaning of these are...</p>
<ul>
<li>
<p><strong>state</strong> 0: None, 1: Moving target, 2: Stationary target, 3: Both targets.</p>
</li>
<li>
<p><strong>moving target dist</strong> Distance (cm) at which a moving target was detected.</p>
</li>
<li>
<p><strong>moving target energy</strong> The detection confidence level, between 0 (low confidence) to 100 (very confident).</p>
</li>
<li>
<p><strong>stationary target dist</strong> Distance (cm) at which a stationary target was detected.</p>
</li>
<li>
<p><strong>stationary target energy</strong> The detection confidence level, between 0 (low confidence) to 100 (very confident).</p>
</li>
<li>
<p><strong>detection distance</strong> Unclear what this means..</p>
</li>
</ul>
<h3>LD2410.get_engineering_data()</h3>
<p>Get the engineering data.
This contains more information than the target data, but engineering mode must be enabled.</p>
<p>Returns a list containing "max moving gate, max stationary gate, moving gate energy, stationary gate energy".
The meaning of these are...</p>
<ul>
<li>
<p><strong>max moving gate</strong> The maximum gate at which the moving energy is detected.</p>
</li>
<li>
<p><strong>max stationary gate</strong> The maximum gate at which the stationary energy is detected.</p>
</li>
<li>
<p><strong>moving gate energy</strong> A list containing the energy level for each gate.</p>
</li>
<li>
<p><strong>stationary gate energy</strong> A list containing the energy level for each gate.</p>
</li>
</ul>
<h3>LD2410.enable_config()</h3>
<p>Enables changing of configurations.
You must run <code>enable_config()</code> before changing any configuration values, and run <code>disable_config()</code> after making the change.</p>
<p>Returns <code>None</code>.</p>
<h3>LD2410.disble_config()</h3>
<p>Disbles changing of configurations.
You must run <code>enable_config()</code> before changing any configuration values, and run <code>disable_config()</code> after making the change.</p>
<p>Returns <code>None</code>.</p>
<h3>LD2410.set_max_values(moving_gate, stationary_gate, inactivity_time)</h3>
<p>Sets configurations.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>moving_gate</code> An integer representing the maximum gate which will detect a moving person.</p>
</li>
<li>
<p><code>stationary_gate</code> An integer representing the maximum gate which will detect a stationary person.</p>
</li>
<li>
<p><code>inactivity_time</code> An integer representing the time in seconds during which the output will stay on after is lost.</p>
</li>
</ul>
<p>Returns <code>None</code>.</p>
<h3>LD2410.enable_engineering_mode()</h3>
<p>Enables engineering mode.
You must be in engineering mode to obtain data from <code>get_engineering_data()</code>.</p>
<p>Note that the device always starts with engineering mode disabled.</p>
<p>Returns <code>None</code>.</p>
<h3>LD2410.disable_engineering_mode()</h3>
<p>Disables engineering mode.</p>
<p>Returns <code>None</code>.</p>
<h3>LD2410.set_gate_sensitivity(gate, moving, stationary)</h3>
<p>Sets the sensitivity threshold for the specified gate.
Energy level for the gate must be above its sensitivity threshold for movement to be detected.</p>
<p>As the maximum energy level is 100, if the sensitivity threshold is set to 100, that gate will be effectively disabled.</p>
<p>Note that this setting will persist across a power cycle.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>gate</code> An integer representing gate that you are setting the sensitivity threshold for.</p>
</li>
<li>
<p><code>moving</code> An integer representing the moving sensitivity threshold.</p>
</li>
<li>
<p><code>stationary</code> An integer representing the stationary sensitivity threshold.</p>
</li>
</ul>
<p>Returns <code>None</code>.</p>
<h3>LD2410.get_firmware_version()</h3>
<p>Gets the version of the LD2410 firmware.</p>
<p>Returns a tuple containing 3 integers (firmware type, major version, minor version).</p>
<h3>LD2410.set_baudrate(baudrate)</h3>
<p>Sets the baudrate.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>baudrate</code> The baudrate setting, which can be one of the following:</p>
<ul>
<li>
<p><code>1</code> Set the baudrate to 9600.</p>
</li>
<li>
<p><code>2</code> Set the baudrate to 19200.</p>
</li>
<li>
<p><code>3</code> Set the baudrate to 38400.</p>
</li>
<li>
<p><code>4</code> Set the baudrate to 57600.</p>
</li>
<li>
<p><code>5</code> Set the baudrate to 115200.</p>
</li>
<li>
<p><code>6</code> Set the baudrate to 230400.</p>
</li>
<li>
<p><code>7</code> Set the baudrate to 256000. This is the factory default.</p>
</li>
<li>
<p><code>8</code> Set the baudrate to 460800.</p>
</li>
</ul>
</li>
</ul>
<h3>LD2410.factory_reset()</h3>
<p>Reset all settings to the factory default.</p>
<p>Returns <code>None</code>.</p>
<h3>LD2410.restart()</h3>
<p>Restart the device.</p>
<p>Returns <code>None</code>.</p>
</div>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        function initHamburger() {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });
        }

        function initSectionMenu() {
            function clickHandler(evt) {
                let sectionTitle = evt.currentTarget;
                let classname = sectionTitle.attributes['data-section'].value;
                let sectionChild = document.querySelector('ul.' + classname);
                if (sectionChild.classList.contains('hide')) {
                    sectionChild.classList.remove('hide');
                    sectionTitle.classList.remove('close');
                } else {
                    sectionChild.classList.add('hide');
                    sectionTitle.classList.add('close');
                }
            }

            let sectionTitles = document.getElementsByClassName('sectionTitle');
            for (let sectionTitle of sectionTitles) {
                sectionTitle.addEventListener('click', clickHandler);
            }
        }

        function scrollSectionIntoView() {
            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });

            let hiddenParent = currentEle.closest('.hide');
            if (hiddenParent) {
                hiddenParent.classList.remove('hide');
                hiddenParent.previousElementSibling.classList.remove('close');
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            initHamburger();
            initSectionMenu();
            scrollSectionIntoView();
        });
    </script>
</body>
</html>