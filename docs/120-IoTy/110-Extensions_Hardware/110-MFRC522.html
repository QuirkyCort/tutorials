<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>IoTy Documentation</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            IoTy Documentation
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">Internet-of-Things made easy</div>
            <p>Intro to IoTy</p><ul><a href="../10-Introduction/10-Intro.html"><li >Introduction</li></a><a href="../10-Introduction/20-First-Program.html"><li >First Program</li></a><a href="../10-Introduction/30-Connection-Modes.html"><li >Connection Modes</li></a><a href="../10-Introduction/40-Monitor.html"><li >Monitor</li></a></ul><p>Basic Features (GPIO)</p><ul><a href="../20-Basics-GPIO/10-GPIO-Pins.html"><li >GPIO Pins</li></a><a href="../20-Basics-GPIO/20-Analog-Read-and-Write.html"><li >Analog Read and Write</li></a><a href="../20-Basics-GPIO/30-Servo.html"><li >Servo</li></a><a href="../20-Basics-GPIO/40-Ultrasonic-Distance.html"><li >Ultrasonic Distance (HC-SR04)</li></a><a href="../20-Basics-GPIO/99-Python-Docs---pin.html"><li >Python Docs - pin</li></a></ul><p>Extensions (Software)</p><ul><a href="../100-Extensions_Software/10-urequests.html"><li >HTTP Requests (urequests)</li></a><a href="../100-Extensions_Software/20-EZ-ESP-NOW.html"><li >EZ ESP-NOW</li></a><a href="../100-Extensions_Software/30-EZ-HTTPD.html"><li >EZ HTTP (Web Server)</li></a><a href="../100-Extensions_Software/40-non-block.html"><li >Non-Blocking Read</li></a><a href="../100-Extensions_Software/50-EZ-Timer.html"><li >EZ Timer</li></a></ul><p>Extensions (Hardware)</p><ul><a href="../110-Extensions_Hardware/10-Gyro.html"><li >Gyro (MPU-6050)</li></a><a href="../110-Extensions_Hardware/20-Servo-driver.html"><li >Servo Driver (PCA9685)</li></a><a href="../110-Extensions_Hardware/30-SSD1306.html"><li >OLED Screen (SSD1306)</li></a><a href="../110-Extensions_Hardware/40-Neopixel.html"><li >Neopixel (WS2812 LEDs)</li></a><a href="../110-Extensions_Hardware/50-I2C-LCD.html"><li >I2C LCD (HD44780 + PCF8574)</li></a><a href="../110-Extensions_Hardware/60-DHT11.html"><li >Temperature and Humidity (DHT11, DHT22, AM2302)</li></a><a href="../110-Extensions_Hardware/70-EZ-DS18X20.html"><li >Temperature Sensor (DS18S20, DS18B20)</li></a><a href="../110-Extensions_Hardware/80-GPS.html"><li >GPS (NMEA over serial)</li></a><a href="../110-Extensions_Hardware/90-hx711.html"><li >Analog-to-Digital (HX711)</li></a><a href="../110-Extensions_Hardware/100-hx710.html"><li >Analog-to-Digital (HX710)</li></a><a href="../110-Extensions_Hardware/110-MFRC522.html"><li class="current">RFID Reader (MFRC522)</li></a><a href="../110-Extensions_Hardware/120-Magnetic-Sensor.html"><li >Magnetic Sensor (QMC5883L, HMC5883L)</li></a><a href="../110-Extensions_Hardware/130-Barometric-Pressure.html"><li >Barometric Pressure (BMP280, BME280)</li></a></ul><p>Others Components</p><ul><a href="../200-Others/10-hbridge.html"><li >Intro to H-Bridge</li></a><a href="../200-Others/12-hbridgeControl2Pins.html"><li >Controlling a H-Bridge (2 pins)</li></a><a href="../200-Others/14-hbridgeControl3Pins.html"><li >Controlling a H-Bridge (3 pins)</li></a></ul>
        </nav>
        <div id="content">
            <h1>RFID Reader (MFRC522)</h1>
<p><img alt="" src="images/mfrc522.webp" /></p>
<p>The MFRC522 is a cheap and popular RFID reader.
You can find it for less than $2, and it comes with a card tag and a key fob tag.</p>
<p>This extension allows you to read the tag ID (Blocks and Python), as well as read / write data to the tag (Python only).</p>
<div class="important">
While it is a popular project to use RFID tag ID to control locks, this is not secure as the tag IDs can be easily copied and replicated. Still, it can be good fun to build such a device; just don't rely on it to secure anything too important.
</div>

<h2>Pins</h2>
<p><img alt="" src="images/mfrc522_pinout.webp" /></p>
<table>
<thead>
<tr>
<th>Pin</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>3.3V</td>
<td>Power for the sensor. Connect to <strong>3V3</strong>.</td>
</tr>
<tr>
<td>RST</td>
<td>Reset pin. You need to connect this to an output capable pin on the ESP32 (default pin 27).</td>
</tr>
<tr>
<td>GND</td>
<td>Ground pin. This should be connected to the <strong>GND</strong> pin on the ESP32.</td>
</tr>
<tr>
<td>IRQ</td>
<td>Interrupt pin. This is used to notify the microcontroller that a card is present. It's not supported by this extension.</td>
</tr>
<tr>
<td>MISO</td>
<td>Master-In-Slave-Out. This is used to communicate with the ESP32 using the SPI protocol (default pin 12).</td>
</tr>
<tr>
<td>MOSI</td>
<td>Master-Out-Slave-In. This is used to communicate with the ESP32 using the SPI protocol (default pin 13).</td>
</tr>
<tr>
<td>SCK</td>
<td>Serial Clock. This is used to communicate with the ESP32 using the SPI protocol (default pin 14).</td>
</tr>
<tr>
<td>SDA</td>
<td>This is the CS (Chip Select) pin. You need to connect this to an output capable pin on the ESP32 (default pin 26).</td>
</tr>
</tbody>
</table>
<div class="info">
The MFRC522 is also capable of communicating using the UART and I2C protocol, but most boards are hard-wired for SPI only. This extension only support SPI.
</div>

<h2>Wiring</h2>
<p><img alt="" src="images/mfrc522_wiring.webp" /></p>
<h2>Code</h2>
<p>This code will check if a tag is present, if it is, it'll retrieve and print out its ID.</p>
<h3>Blocks</h3>
<p><img alt="" src="images/mfrc522_blocks.webp" /></p>
<h3>Python</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">mfrc522</span>

<span class="n">spi1</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">1000000</span><span class="p">,</span> <span class="n">sck</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span> <span class="n">mosi</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span> <span class="n">miso</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<span class="n">mfrc522_device</span> <span class="o">=</span> <span class="n">mfrc522</span><span class="o">.</span><span class="n">MFRC522</span><span class="p">(</span><span class="n">spi1</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">26</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">mfrc522_device</span><span class="o">.</span><span class="n">card_present</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">mfrc522_device</span><span class="o">.</span><span class="n">get_uid</span><span class="p">())</span>
</code></pre></div>

<h3>Results</h3>
<p>Bring an RFID tag close to the MFRC522.
You should see a hexidecimal string printed in the monitor</p>
<h1><code>class MFRC522</code> - control MFRC522 RFID reader</h1>
<div class="custom_lib_docs">
<h2>Constructors</h2>
<h3>mfrc522.MFRC522(spi, rst, cs)</h3>
<p>Creates an MFRC522 object.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>spi</code> An SPI object.</p>
</li>
<li>
<p><code>rst</code> An integer specifying the microcontroller pin connected to RST.</p>
</li>
<li>
<p><code>cs</code> An integer specifying the microcontroller pin connected to CS (often labelled as SDA on the board).</p>
</li>
</ul>
<p>Returns a <code>MFRC522</code> object.</p>
<h2>Methods</h2>
<p>Only a few methods are documented here.
More methods are available, but you'll need to read the source code.</p>
<h3>MFRC522.card_present()</h3>
<p>Check if a card is detected by the reader.</p>
<p>Returns <code>True</code> if a card is detected, else <code>False</code>.</p>
<h3>MFRC522.get_uid()</h3>
<p>Gets the UID on the tag.
The UID is 4 bytes (32 bits).
When printed in hexidecimal, it will use 2 characters per byte, so the returned string will have 8 characters.</p>
<p>Returns a string representing the tag's UID in hexidecimal.</p>
</div>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });

            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        });
    </script>
</body>
</html>