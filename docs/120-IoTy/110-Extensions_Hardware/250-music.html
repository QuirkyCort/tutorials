<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>IoTy Documentation</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            IoTy Documentation
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">Internet-of-Things made easy</div>
            <p class="sectionTitle close" data-section="IntrotoIoTy"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Intro to IoTy</p><ul class="IntrotoIoTy hide"><a href="../10-Introduction/10-Intro.html"><li >Introduction</li></a><a href="../10-Introduction/20-First-Program.html"><li >First Program</li></a><a href="../10-Introduction/30-Connection-Modes.html"><li >Connection Modes</li></a><a href="../10-Introduction/40-Monitor.html"><li >Monitor</li></a></ul><p class="sectionTitle close" data-section="BasicFeaturesGPIO"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Basic Features (GPIO)</p><ul class="BasicFeaturesGPIO hide"><a href="../20-Basics-GPIO/10-GPIO-Pins.html"><li >GPIO Pins</li></a><a href="../20-Basics-GPIO/20-Analog-Read-and-Write.html"><li >Analog Read and Write</li></a><a href="../20-Basics-GPIO/30-Servo.html"><li >Servo</li></a><a href="../20-Basics-GPIO/40-Ultrasonic-Distance.html"><li >Ultrasonic Distance (HC-SR04)</li></a><a href="../20-Basics-GPIO/99-Python-Docs---pin.html"><li >Python Docs - pin</li></a></ul><p class="sectionTitle close" data-section="ExtensionsSoftware"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Extensions (Software)</p><ul class="ExtensionsSoftware hide"><a href="../100-Extensions_Software/10-urequests.html"><li >HTTP Requests (urequests)</li></a><a href="../100-Extensions_Software/20-EZ-ESP-NOW.html"><li >EZ ESP-NOW</li></a><a href="../100-Extensions_Software/30-EZ-HTTPD.html"><li >EZ HTTP (Web Server)</li></a><a href="../100-Extensions_Software/40-non-block.html"><li >Non-Blocking Read</li></a><a href="../100-Extensions_Software/50-EZ-Timer.html"><li >EZ Timer</li></a><a href="../100-Extensions_Software/60-tween.html"><li >Tween</li></a><a href="../100-Extensions_Software/70-BLE-HID.html"><li >Bluetooth Low Energy Human Interface Device</li></a></ul><p class="sectionTitle close" data-section="ExtensionsHardware"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Extensions (Hardware)</p><ul class="ExtensionsHardware hide"><a href="../110-Extensions_Hardware/10-Gyro.html"><li >Gyro (MPU-6050)</li></a><a href="../110-Extensions_Hardware/20-Servo-driver.html"><li >Servo Driver (PCA9685)</li></a><a href="../110-Extensions_Hardware/30-SSD1306.html"><li >OLED Screen (SSD1306 / SH1106)</li></a><a href="../110-Extensions_Hardware/40-Neopixel.html"><li >Neopixel (WS2812 LEDs)</li></a><a href="../110-Extensions_Hardware/50-I2C-LCD.html"><li >I2C LCD (HD44780 + PCF8574)</li></a><a href="../110-Extensions_Hardware/60-DHT11.html"><li >Temperature and Humidity (DHT11, DHT22, AM2302)</li></a><a href="../110-Extensions_Hardware/70-EZ-DS18X20.html"><li >Temperature Sensor (DS18S20, DS18B20)</li></a><a href="../110-Extensions_Hardware/80-GPS.html"><li >GPS (NMEA over serial)</li></a><a href="../110-Extensions_Hardware/90-hx711.html"><li >Analog-to-Digital (HX711)</li></a><a href="../110-Extensions_Hardware/100-hx710.html"><li >Analog-to-Digital (HX710)</li></a><a href="../110-Extensions_Hardware/110-MFRC522.html"><li >RFID Reader (MFRC522)</li></a><a href="../110-Extensions_Hardware/120-Magnetic-Sensor.html"><li >Magnetic Sensor (QMC5883L, HMC5883L)</li></a><a href="../110-Extensions_Hardware/130-Barometric-Pressure.html"><li >Barometric Pressure (BMP280, BME280)</li></a><a href="../110-Extensions_Hardware/140-Heart-Rate.html"><li >Heart Rate Sensor (MAX30102)</li></a><a href="../110-Extensions_Hardware/150-ToF.html"><li >Laser Ranging (VL53L0X, VL52L1X)</li></a><a href="../110-Extensions_Hardware/160-rtc-ds3231.html"><li >Real-Time Clock (DS3231)</li></a><a href="../110-Extensions_Hardware/170-apds9960.html"><li >Light, Proximity, Gesture (APDS9960)</li></a><a href="../110-Extensions_Hardware/180-gy33_i2c.html"><li >Color Sensor (GY-33, I2C)</li></a><a href="../110-Extensions_Hardware/190-gy33_uart.html"><li >Color Sensor (GY-33, UART)</li></a><a href="../110-Extensions_Hardware/200-tcs3472.html"><li >Color Sensor (TCS3472)</li></a><a href="../110-Extensions_Hardware/210-max6675.html"><li >Thermocouple Board (MAX6675)</li></a><a href="../110-Extensions_Hardware/220-encoder.html"><li >Incremental Encoder</li></a><a href="../110-Extensions_Hardware/230-husky-lens.html"><li >Husky Lens</li></a><a href="../110-Extensions_Hardware/250-music.html"><li class="current">Music</li></a><a href="../110-Extensions_Hardware/260-Scaled-Text.html"><li >Scaled Text</li></a><a href="../110-Extensions_Hardware/270-PNG-decoder.html"><li >PNG Decoder</li></a><a href="../110-Extensions_Hardware/280-BMP-Image.html"><li >BMP Image</li></a><a href="../110-Extensions_Hardware/290-serial-mp3.html"><li >Serial MP3 Player (YX5300, YX6300)</li></a></ul><p class="sectionTitle close" data-section="OthersComponents"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Others Components</p><ul class="OthersComponents hide"><a href="../200-Others/10-hbridge.html"><li >Intro to H-Bridge</li></a><a href="../200-Others/12-hbridgeControl2Pins.html"><li >Controlling a H-Bridge (2 pins)</li></a><a href="../200-Others/14-hbridgeControl3Pins.html"><li >Controlling a H-Bridge (3 pins)</li></a></ul>
        </nav>
        <div id="content">
            <h1>Music</h1>
<p><img alt="" src="images/music.webp" /></p>
<p>Plays tones, musical notes, and songs in <a href="https://en.wikipedia.org/wiki/Ring_Tone_Text_Transfer_Language#:~:text=Ring%20Tone%20Text%20Transfer%20Language%20(RTTTL)%20is%20a%20text%2D,the%20name%20of%20the%20ringtone.">Ring Tone Text Transfer Language (RTTTL)</a> format.</p>
<p>You can find many RTTTL songs online (eg. <a href="https://picaxe.com/rtttl-ringtones-for-tune-command/">https://picaxe.com/rtttl-ringtones-for-tune-command/</a>).
No special softwares are required to compose RTTTL songs, but something like this... <a href="https://eddmann.com/nokia-composer-web/">https://eddmann.com/nokia-composer-web/</a> can make the process easier.</p>
<h2>Pins</h2>
<p>The music extension does not require any specific hardware.
You can use it with a <strong>passive</strong> piezoelectric speaker, earphones, or speakers (...through an amplifier).</p>
<div class="important">
The piezoelectric speaker must be the passive type. The active type speakers contains built-in circuits to generate a fixed tone, and are unsuitable for music. Connect the speaker directly to power; if it makes a tone, it's an active type, else it is a passive type.
</div>

<h2>Wiring</h2>
<p><img alt="" src="images/music_wiring.webp" /></p>
<p>Depending on the type of speaker you're using, the wiring may differ.</p>
<h2>Code</h2>
<p>This code will play a short music segment.</p>
<h3>Blocks</h3>
<p><img alt="" src="images/music_blocks.webp" /></p>
<h3>Python</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">music</span>

<span class="n">music_device</span> <span class="o">=</span> <span class="n">music</span><span class="o">.</span><span class="n">Music</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">music_device</span><span class="o">.</span><span class="n">play_rtttl</span><span class="p">(</span><span class="s1">&#39;Short:d=4,o=4,b=240:c5,8g,8g,a,g.,b,c5&#39;</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">loops</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<h3>Results</h3>
<p>You should hear a short music segment play from the speakers.</p>
<h1><code>class Music</code> - play music</h1>
<div class="custom_lib_docs">
<h2>Constructors</h2>
<h3>music.Music(pin)</h3>
<p>Creates an Music object.</p>
<p>The arguments are:</p>
<ul>
<li><code>pin</code> An integer representing the pin connected to the speaker or amplifier.</li>
</ul>
<p>Returns an <code>Music</code> object.</p>
<h2>Methods</h2>
<h3>Music.play_tone(freq, ms, wait=True)</h3>
<p>Plays a tone of the specified frequency.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>freq</code> An integer representing the frequency to play in Hz.</p>
</li>
<li>
<p><code>ms</code> An integer representing the duration of the tone in milliseconds.</p>
</li>
<li>
<p><code>wait</code> A boolean. If True, the method will block until the tone completes playing. If False, you must run <code>update()</code> frequently or the tone will not end.</p>
</li>
</ul>
<p>Returns None.</p>
<h3>Music.play_notes(note, wait=True, loops=0)</h3>
<p>Plays notes in the RTTTL format.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>note</code> A string representing RTTTL notes (eg. <strong>'2b4'</strong>: Half note, B, 4th octave, <strong>'1a#3'</strong> Full note, A sharp, 3rd octave). If there are multiple notes, they should be separated by a comma (eg. <strong>'2b4,1a#3'</strong>). Case insensitive.</p>
</li>
<li>
<p><code>wait</code> A boolean. If True, the method will block until the notes completes playing. If False, you must run <code>update()</code> frequently or the notes will not play correctly.</p>
</li>
<li>
<p><code>loops</code> An integer specifying how many times to loop the notes. The default 0 means that it will play once without repeating. If set to a negative value (eg. -1), the notes will loop forever.</p>
</li>
</ul>
<p>Returns None.</p>
<h3>Music.play_rtttl(tune, wait=True, loops=0)</h3>
<p>Plays a note in the RTTTL format.</p>
<p>The arguments are:</p>
<ul>
<li>
<p><code>tune</code> A string representing an <a href="https://en.wikipedia.org/wiki/Ring_Tone_Text_Transfer_Language#:~:text=Ring%20Tone%20Text%20Transfer%20Language%20(RTTTL)%20is%20a%20text%2D,the%20name%20of%20the%20ringtone.">RTTTL tune</a>. An RTTTL tune contains a title, settings, and notes.</p>
</li>
<li>
<p><code>wait</code> A boolean. If True, the method will block until the notes completes playing. If False, you must run <code>update()</code> frequently or the notes will not play correctly.</p>
</li>
<li>
<p><code>loops</code> An integer specifying how many times to loop the notes. The default 0 means that it will play once without repeating. If set to a negative value (eg. -1), the notes will loop forever.</p>
</li>
</ul>
<p>Returns None.</p>
<h3>Music.stop()</h3>
<p>Stop playing.
This is only useful if <code>wait</code> is set to <code>False</code> when starting the music; if set to <code>True</code>, the music will always play until completion.</p>
<p>Returns None.</p>
<h3>Music.update()</h3>
<p>Update the music.
You must run this frequently if <code>wait</code> is set to <code>False</code>.</p>
<p>The return value lets you know if a new note is started, this can be useful if you want to synchronize the music to something else (eg. lights).
If you don't need it, you can just ignore the return value.</p>
<p>Returns a integer representing the frequency played whenever a new note is played. After the start of a new note, it will return <code>0</code> until another note is played. At the end of the music, it will return <code>-1</code>.</p>
<h3>Music.is_playing()</h3>
<p>Checks if the music is still playing.</p>
<p>Returns False if the music has completed, else returns True.</p>
</div>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        function initHamburger() {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });
        }

        function initSectionMenu() {
            function clickHandler(evt) {
                let sectionTitle = evt.currentTarget;
                let classname = sectionTitle.attributes['data-section'].value;
                let sectionChild = document.querySelector('ul.' + classname);
                if (sectionChild.classList.contains('hide')) {
                    sectionChild.classList.remove('hide');
                    sectionTitle.classList.remove('close');
                } else {
                    sectionChild.classList.add('hide');
                    sectionTitle.classList.add('close');
                }
            }

            let sectionTitles = document.getElementsByClassName('sectionTitle');
            for (let sectionTitle of sectionTitles) {
                sectionTitle.addEventListener('click', clickHandler);
            }
        }

        function scrollSectionIntoView() {
            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });

            let hiddenParent = currentEle.closest('.hide');
            if (hiddenParent) {
                hiddenParent.classList.remove('hide');
                hiddenParent.previousElementSibling.classList.remove('close');
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            initHamburger();
            initSectionMenu();
            scrollSectionIntoView();
        });
    </script>
</body>
</html>