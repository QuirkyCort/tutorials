<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>IoTy Documentation</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            IoTy Documentation
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">Internet-of-Things made easy</div>
            <p>Intro to IoTy</p><ul><a href="../10-Introduction/10-Intro.html"><li >Introduction</li></a><a href="../10-Introduction/20-First-Program.html"><li >First Program</li></a><a href="../10-Introduction/30-Connection-Modes.html"><li >Connection Modes</li></a><a href="../10-Introduction/40-Monitor.html"><li >Monitor</li></a></ul><p>Basic Features (GPIO)</p><ul><a href="../20-Basics-GPIO/10-GPIO-Pins.html"><li >GPIO Pins</li></a><a href="../20-Basics-GPIO/20-Analog-Read-and-Write.html"><li >Analog Read and Write</li></a><a href="../20-Basics-GPIO/30-Servo.html"><li >Servo</li></a><a href="../20-Basics-GPIO/40-Ultrasonic-Distance.html"><li >Ultrasonic Distance (HC-SR04)</li></a><a href="../20-Basics-GPIO/99-Python-Docs---pin.html"><li >Python Docs - pin</li></a></ul><p>Extensions (Software)</p><ul><a href="../100-Extensions_Software/10-urequests.html"><li >HTTP Requests (urequests)</li></a><a href="../100-Extensions_Software/20-EZ-ESP-NOW.html"><li >EZ ESP-NOW</li></a><a href="../100-Extensions_Software/30-EZ-HTTPD.html"><li >EZ HTTP (Web Server)</li></a><a href="../100-Extensions_Software/40-non-block.html"><li >Non-Blocking Read</li></a><a href="../100-Extensions_Software/50-EZ-Timer.html"><li >EZ Timer</li></a></ul><p>Extensions (Hardware)</p><ul><a href="../110-Extensions_Hardware/10-Gyro.html"><li >Gyro (MPU-6050)</li></a><a href="../110-Extensions_Hardware/20-Servo-driver.html"><li >Servo Driver (PCA9685)</li></a><a href="../110-Extensions_Hardware/30-SSD1306.html"><li >OLED Screen (SSD1306)</li></a><a href="../110-Extensions_Hardware/40-Neopixel.html"><li >Neopixel (WS2812 LEDs)</li></a><a href="../110-Extensions_Hardware/50-I2C-LCD.html"><li >I2C LCD (HD44780 + PCF8574)</li></a><a href="../110-Extensions_Hardware/60-DHT11.html"><li >Temperature and Humidity (DHT11, DHT22, AM2302)</li></a><a href="../110-Extensions_Hardware/70-EZ-DS18X20.html"><li class="current">Temperature Sensor (DS18S20, DS18B20)</li></a><a href="../110-Extensions_Hardware/80-GPS.html"><li >GPS (NMEA over serial)</li></a><a href="../110-Extensions_Hardware/90-hx711.html"><li >Analog-to-Digital (HX711)</li></a><a href="../110-Extensions_Hardware/100-hx710.html"><li >Analog-to-Digital (HX710)</li></a><a href="../110-Extensions_Hardware/110-MFRC522.html"><li >RFID Reader (MFRC522)</li></a><a href="../110-Extensions_Hardware/120-Magnetic-Sensor.html"><li >Magnetic Sensor (QMC5883L, HMC5883L)</li></a><a href="../110-Extensions_Hardware/130-Barometric-Pressure.html"><li >Barometric Pressure (BMP280, BME280)</li></a></ul><p>Others Components</p><ul><a href="../200-Others/10-hbridge.html"><li >Intro to H-Bridge</li></a><a href="../200-Others/12-hbridgeControl2Pins.html"><li >Controlling a H-Bridge (2 pins)</li></a><a href="../200-Others/14-hbridgeControl3Pins.html"><li >Controlling a H-Bridge (3 pins)</li></a></ul>
        </nav>
        <div id="content">
            <h1>Temperature Sensor (DS18S20, DS18B20)</h1>
<p><img alt="" src="images/ds18x20.webp" /></p>
<p>The DS18S20 (0.5°C precision) and DS18B20 (0.0625°C precision) are low cost thermometers.
They are available packaged in a waterproof probe, making them a popular choice for measuring fluid temperature or in outdoors environment.</p>
<p>These sensors uses the <a href="https://en.wikipedia.org/wiki/1-Wire">1-wire bus</a> to communicate.
The 1-wire bus allows multiple devices to be connected to the same data wire, so you could potentially connect a dozen sensors using just one pin on your microcontroller.</p>
<p>IoTy provides an <strong>EZ DS18X20</strong> extension to read these devices, but you can also use micropython's built-in module to read them.</p>
<div class="info">
You could connect different types of 1-Wire devices to the same pin, but there are not many 1-Wire devices other than the DS18x20 sensors.
</div>

<h2>Pins</h2>
<p><img alt="" src="images/ds18x20_pinout.webp" /></p>
<table>
<thead>
<tr>
<th>Pin</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VCC (Red)</td>
<td>Power for the sensor. Connect to <strong>3V3</strong>.</td>
</tr>
<tr>
<td>GND (Black)</td>
<td>Ground pin. This should be connected to the <strong>GND</strong> pin on the ESP32.</td>
</tr>
<tr>
<td>DATA (Yellow/White)</td>
<td>Data. This should be connected to an output capable pin on the ESP32.</td>
</tr>
</tbody>
</table>
<h2>Wiring</h2>
<p><img alt="" src="images/ds18x20_wiring.webp" /></p>
<p>Note the 4.7kΩ resistor that is connected between 3V3 and the data line (Pin 4).</p>
<p>You can connect multiple units of this temperature sensor to the same pin on the ESP32.</p>
<h2>Code</h2>
<p>This code will display the temperature once every second.</p>
<div class="important">
You must perform a "convert readings" before reading the temperature. The temperature readings will not change until you perform another "convert readings". It takes around 750ms to perform a "convert reading", so you should not perform it more often than that.
</div>

<h3>Blocks</h3>
<p><img alt="" src="images/ds18x20_blocks.webp" /></p>
<p>If you have a second sensor connected to pin 4, you can read it by specifying <code>1</code> as the sensor number.
The order of the sensors is dependent on their internal ID and will not change, but the first time you run it, you'll need to test to determine which is sensor 0 and which is sensor 1.</p>
<h3>Python</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">ez_ds18x20</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">ds_device</span> <span class="o">=</span> <span class="n">ez_ds18x20</span><span class="o">.</span><span class="n">DS18X20</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ds_device</span><span class="o">.</span><span class="n">device_count</span><span class="p">())</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">ds_device</span><span class="o">.</span><span class="n">convert_temp</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds_device</span><span class="o">.</span><span class="n">read_temp</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<p>The <code>ez_ds18x20</code> module provides a thin wrapper over the <code>ds18x20</code> module built into micropython.
You can also use the built-in <code>ds18x20</code> module directly; refer to the <a href="https://docs.micropython.org/en/latest/esp32/quickref.html#onewire-driver">micropython documentations</a>.</p>
<h3>Results</h3>
<p>You should first see the number of connected device printer on the monitor, followed by the temperature (Celsius) once every second.</p>
<h1><code>class DS18X20</code> - control DS18S20 and DS18B20 temperature sensors</h1>
<div class="custom_lib_docs">
<h2>Constructors</h2>
<h3>ez_ds18x20.DS18X20(pin)</h3>
<p>Creates a DS18X20 object.</p>
<p>The arguments are:</p>
<ul>
<li><code>pin</code> An integer specifying the microcontroller pin that the sensors data lines are connected to.</li>
</ul>
<p>Returns a <code>DS18X20</code> object.</p>
<h2>Methods</h2>
<h3>DS18X20.device_count()</h3>
<p>Returns the number of connected sensors.</p>
<p>Note that sensors are scanned for during object construction, so hotplugged devices may not be detected.</p>
<p>Returns an integer representing the number of connected sensors.</p>
<h3>DS18X20.convert_temp()</h3>
<p>Performs a temperature measurement.
This should not be performed more than once every 750ms.</p>
<p>Returns <code>None</code>.</p>
<h3>DS18X20.read_temp(i)</h3>
<p>Returns the temperature measured during the last <code>convert_temp()</code>.</p>
<p>The arguments are:</p>
<ul>
<li><code>i</code> An integer specifying the device index (...starting from <code>0</code>). This is based on the device's internal ID, so the order will not change (...unless you add or remove devices). You will however need to test to determine which sensor correspond to which index the first time you run it.</li>
</ul>
<p>Returns a float representing the temperature in Celsius.</p>
</div>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });

            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        });
    </script>
</body>
</html>