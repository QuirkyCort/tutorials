<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>IoTy Documentation</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            IoTy Documentation
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">Internet-of-Things made easy</div>
            <p class="sectionTitle close" data-section="IntrotoIoTy"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Intro to IoTy</p><ul class="IntrotoIoTy hide"><a href="../10-Introduction/10-Intro.html"><li >Introduction</li></a><a href="../10-Introduction/20-First-Program.html"><li >First Program</li></a><a href="../10-Introduction/30-Connection-Modes.html"><li >Connection Modes</li></a><a href="../10-Introduction/40-Monitor.html"><li >Monitor</li></a></ul><p class="sectionTitle close" data-section="BasicFeaturesGPIO"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Basic Features (GPIO)</p><ul class="BasicFeaturesGPIO hide"><a href="../20-Basics-GPIO/10-GPIO-Pins.html"><li class="current">GPIO Pins</li></a><a href="../20-Basics-GPIO/20-Analog-Read-and-Write.html"><li >Analog Read and Write</li></a><a href="../20-Basics-GPIO/30-Servo.html"><li >Servo</li></a><a href="../20-Basics-GPIO/40-Ultrasonic-Distance.html"><li >Ultrasonic Distance (HC-SR04)</li></a><a href="../20-Basics-GPIO/99-Python-Docs---pin.html"><li >Python Docs - pin</li></a></ul><p class="sectionTitle close" data-section="Network"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Network</p><ul class="Network hide"><a href="../30-Network/10-client-mode.html"><li >Client Mode</li></a><a href="../30-Network/20-ap-mode.html"><li >Access Point Mode</li></a><a href="../30-Network/30-mqtt.html"><li >MQTT</li></a></ul><p class="sectionTitle close" data-section="ExtensionsSoftware"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Extensions (Software)</p><ul class="ExtensionsSoftware hide"><a href="../100-Extensions_Software/10-urequests.html"><li >HTTP Requests (urequests)</li></a><a href="../100-Extensions_Software/20-EZ-ESP-NOW.html"><li >EZ ESP-NOW</li></a><a href="../100-Extensions_Software/30-EZ-HTTPD.html"><li >EZ HTTP (Web Server)</li></a><a href="../100-Extensions_Software/40-non-block.html"><li >Non-Blocking Read</li></a><a href="../100-Extensions_Software/50-EZ-Timer.html"><li >EZ Timer</li></a><a href="../100-Extensions_Software/60-tween.html"><li >Tween</li></a><a href="../100-Extensions_Software/70-BLE-HID.html"><li >Bluetooth Low Energy Human Interface Device</li></a></ul><p class="sectionTitle close" data-section="ExtensionsHardware"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Extensions (Hardware)</p><ul class="ExtensionsHardware hide"><a href="../110-Extensions_Hardware/10-Gyro.html"><li >Gyro (MPU-6050)</li></a><a href="../110-Extensions_Hardware/20-Servo-driver.html"><li >Servo Driver (PCA9685)</li></a><a href="../110-Extensions_Hardware/30-SSD1306.html"><li >OLED Screen (SSD1306 / SH1106)</li></a><a href="../110-Extensions_Hardware/40-Neopixel.html"><li >Neopixel (WS2812 LEDs)</li></a><a href="../110-Extensions_Hardware/50-I2C-LCD.html"><li >I2C LCD (HD44780 + PCF8574)</li></a><a href="../110-Extensions_Hardware/60-DHT11.html"><li >Temperature and Humidity (DHT11, DHT22, AM2302)</li></a><a href="../110-Extensions_Hardware/70-EZ-DS18X20.html"><li >Temperature Sensor (DS18S20, DS18B20)</li></a><a href="../110-Extensions_Hardware/80-GPS.html"><li >GPS (NMEA over serial)</li></a><a href="../110-Extensions_Hardware/90-hx711.html"><li >Analog-to-Digital (HX711)</li></a><a href="../110-Extensions_Hardware/100-hx710.html"><li >Analog-to-Digital (HX710)</li></a><a href="../110-Extensions_Hardware/110-MFRC522.html"><li >RFID Reader (MFRC522)</li></a><a href="../110-Extensions_Hardware/120-Magnetic-Sensor.html"><li >Magnetic Sensor (QMC5883L, HMC5883L)</li></a><a href="../110-Extensions_Hardware/130-Barometric-Pressure.html"><li >Barometric Pressure (BMP280, BME280)</li></a><a href="../110-Extensions_Hardware/140-Heart-Rate.html"><li >Heart Rate Sensor (MAX30102)</li></a><a href="../110-Extensions_Hardware/150-ToF.html"><li >Laser Ranging (VL53L0X, VL52L1X)</li></a><a href="../110-Extensions_Hardware/160-rtc-ds3231.html"><li >Real-Time Clock (DS3231)</li></a><a href="../110-Extensions_Hardware/170-apds9960.html"><li >Light, Proximity, Gesture (APDS9960)</li></a><a href="../110-Extensions_Hardware/180-gy33_i2c.html"><li >Color Sensor (GY-33, I2C)</li></a><a href="../110-Extensions_Hardware/190-gy33_uart.html"><li >Color Sensor (GY-33, UART)</li></a><a href="../110-Extensions_Hardware/200-tcs3472.html"><li >Color Sensor (TCS3472)</li></a><a href="../110-Extensions_Hardware/210-max6675.html"><li >Thermocouple Board (MAX6675)</li></a><a href="../110-Extensions_Hardware/220-encoder.html"><li >Incremental Encoder</li></a><a href="../110-Extensions_Hardware/230-husky-lens.html"><li >Husky Lens</li></a><a href="../110-Extensions_Hardware/250-music.html"><li >Music</li></a><a href="../110-Extensions_Hardware/260-Scaled-Text.html"><li >Scaled Text</li></a><a href="../110-Extensions_Hardware/270-PNG-decoder.html"><li >PNG Decoder</li></a><a href="../110-Extensions_Hardware/280-BMP-Image.html"><li >BMP Image</li></a><a href="../110-Extensions_Hardware/290-serial-mp3.html"><li >Serial MP3 Player (YX5300, YX6300)</li></a><a href="../110-Extensions_Hardware/300-ld2410.html"><li >Human Presence Radar (LD2410)</li></a></ul><p class="sectionTitle close" data-section="OthersComponents"><i class="plus fa fa-plus-square-o" aria-hidden="true"></i><i class="minus fa fa-minus-square-o" aria-hidden="true"></i> Others Components</p><ul class="OthersComponents hide"><a href="../200-Others/10-hbridge.html"><li >Intro to H-Bridge</li></a><a href="../200-Others/12-hbridgeControl2Pins.html"><li >Controlling a H-Bridge (2 pins)</li></a><a href="../200-Others/14-hbridgeControl3Pins.html"><li >Controlling a H-Bridge (3 pins)</li></a></ul>
        </nav>
        <div id="content">
            <h1>GPIO Pins</h1>
<p><img alt="" src="images/esp32Pinout.webp" /></p>
<p>Most of the pins on the ESP32 can be used for inputs and outputs.
Exceptions are labelled above and described below.</p>
<table>
<thead>
<tr>
<th>Label</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>VIN</td>
<td>You can power the ESP32 by supplying 5V to 12V to this pin. If connected to USB, this pin will output 5V.</td>
</tr>
<tr>
<td>3V3</td>
<td>This pins outputs 3.3V.</td>
</tr>
<tr>
<td>GND</td>
<td>Ground pin. Both GND pins are the same, so you can use either.</td>
</tr>
<tr>
<td>INPUT ONLY</td>
<td>These pins can only be used as inputs. You cannot write to these pins. They also do not have internal pull-up resistors.</td>
</tr>
<tr>
<td>ANALOG READ</td>
<td>Only these pins can be used for analog read.</td>
</tr>
<tr>
<td>TOUCH</td>
<td>Only these pins can be used for touch read.</td>
</tr>
<tr>
<td>LED</td>
<td>This pin is connected to the onboard blue LED.</td>
</tr>
<tr>
<td>BOOT</td>
<td>This button is connected to Pin 0. Pin 0 will return a 0 (LOW) when the button is pressed, and 1 (HIGH) when it is not.</td>
</tr>
<tr>
<td>UART0 RX/TX</td>
<td>These pins are connected to the micropython terminal. You should not use them.</td>
</tr>
<tr>
<td>STRAP</td>
<td>These pins are generally ok to use, but they may output a signal during boot-up.</td>
</tr>
<tr>
<td>EN</td>
<td>This pin is connected to the EN (Reset) button. When connected to GND, the ESP32 will reset.</td>
</tr>
</tbody>
</table>
<h2>Breadboard</h2>
<p>Breadboards and dupont wires provides an easy way to connect components to your device.</p>
<p><img alt="" src="images/breadboard.webp" /></p>
<p>When connecting your ESP32 to a breadboard, it is recommended to plug in only one side to each breadboard.
Like this...</p>
<p><img alt="" src="images/breadboardOneSide.webp" /></p>
<p>If you need to use the other side as well, use a second breadboard...</p>
<p><img alt="" src="images/breadboardTwoSides.webp" /></p>
<h2>Digital Output (Write)</h2>
<p>Writing a <code>1</code> to a pin will set it to <code>HIGH</code> (3.3V).
Writing a <code>0</code> to a pin will set it to <code>LOW</code> (0V).</p>
<h3>Wiring Example</h3>
<p><img alt="" src="images/blinkWiring.webp" /></p>
<p>If you do not have a suitable LED, you can use <code>Pin 2</code> instead.
<code>Pin 2</code> is connected to an internal Blue LED.</p>
<div class="info">
The pins on the ESP32 outputs 3.3V. White and Blue LEDs works around that voltage, while most other colors requires a lower voltage (eg. 1.8V for Red). If you need to use a different color LED, you may need to add a resistor to reduce the voltage.
</div>

<h3>Code</h3>
<p>This example code turns the LED on/off every 1 second.</p>
<h3>Blocks</h3>
<p><img alt="" src="images/blink2.webp" /></p>
<h3>Python</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">ioty</span> <span class="kn">import</span> <span class="n">pin</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">pin</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">pin</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<h2>Digital Input (Read)</h2>
<p>Reading a pin will return <code>1</code> when it is <code>HIGH</code> (3.3V), and a <code>0</code> when it is <code>LOW</code> (0V).</p>
<p>It is often useful to enable the internal pull-up resistor when using a pin as an input; this will ensure that the pin is <code>HIGH</code> when it is not connected to anything, and <code>LOW</code> when connected to <code>GND</code>.
Without a pull-up resistor, the pin will be indetermined when not connected, and may give you random values.</p>
<h3>Wiring Example</h3>
<p><img alt="" src="images/btnWiring.webp" /></p>
<p>If you do not have a suitable push button, you can used <code>Pin 0</code> instead.
<code>Pin 0</code> is connected to the <code>BOOT</code> button on the ESP32.</p>
<h3>Code</h3>
<p>This example code turns the built-in LED (Pin 2) on when the button (...connected to Pin 4) is pressed, and off when it is released.</p>
<h3>Blocks</h3>
<p><img alt="" src="images/btn.webp" /></p>
<p>To add the <code>else</code> to an <code>if</code> block, use the gear icon.
You can use the same method to add an <code>else if</code> if you require it.</p>
<video width="584" height="334" autoplay loop muted>
    <source src="images/ifElseElseif.mp4" type="video/mp4">
</video>

<h3>Python</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">ioty</span> <span class="kn">import</span> <span class="n">pin</span>

<span class="n">pin</span><span class="o">.</span><span class="n">set_pin_mode</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">pin</span><span class="o">.</span><span class="n">digital_read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">pin</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pin</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>

<h2>Touch Input</h2>
<p>Some of the pins on the ESP32 are capable of detecting capacitive touch.
This allows you to use these pins as buttons, by simply connecting a wire to the pin and touching the wire.</p>
<p>The values returned by the "touch read pin" block will tend to be high (...100s to over 1000) when there is no contact, and low (...less than 100) when there is contact.
The exact value will vary, and you'll need to test to determine it.</p>
<h3>Wiring Example</h3>
<p><img alt="" src="images/touchWiring.webp" /></p>
<p>Note that the wire is not connected to anything; we'll be using the wire itself to detect touch.
To make a better touch button, you can connect the wire to an uninsulated paper clip or a piece of metal foil.</p>
<h3>Code (touch test)</h3>
<p>We'll start with a simple code that displays the touch values.
This will let us know what values to expect when there is contact and no contact.</p>
<h3>Blocks (touch test)</h3>
<p><img alt="" src="images/touchBlocks.webp" /></p>
<h3>Python (touch test)</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">ioty</span> <span class="kn">import</span> <span class="n">pin</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pin</span><span class="o">.</span><span class="n">touch_read</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>

<h3>Results (touch test)</h3>
<p>Check the monitor for the results.
Touch the wire and see how the values change.</p>
<p><img alt="" src="images/touchTestResults.webp" /></p>
<p>In this case, the values are around 500+ when there is no contact, and around 60-140 when there is contact.</p>
<h3>Code (touch button)</h3>
<p>Based on our test results, we can pick a number between the contact and no-contact values.
In this case, 300 would be roughly in the middle between the two ranges, but be warned that you may get a different value from me.</p>
<p>If the touch read value is below 300, we'll consider it to be touched, and turn on the Blue LED.
Else, we'll turn the LED off.
This is similar to the digital input exercise where we used a button, but here we are using a wire as a button.</p>
<h3>Blocks (touch button)</h3>
<p><img alt="" src="images/touchSwitch.webp" /></p>
<h3>Python (touch button)</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">ioty</span> <span class="kn">import</span> <span class="n">pin</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">pin</span><span class="o">.</span><span class="n">touch_read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
        <span class="n">pin</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pin</span><span class="o">.</span><span class="n">digital_write</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        function initHamburger() {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });
        }

        function initSectionMenu() {
            function clickHandler(evt) {
                let sectionTitle = evt.currentTarget;
                let classname = sectionTitle.attributes['data-section'].value;
                let sectionChild = document.querySelector('ul.' + classname);
                if (sectionChild.classList.contains('hide')) {
                    sectionChild.classList.remove('hide');
                    sectionTitle.classList.remove('close');
                } else {
                    sectionChild.classList.add('hide');
                    sectionTitle.classList.add('close');
                }
            }

            let sectionTitles = document.getElementsByClassName('sectionTitle');
            for (let sectionTitle of sectionTitles) {
                sectionTitle.addEventListener('click', clickHandler);
            }
        }

        function scrollSectionIntoView() {
            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });

            let hiddenParent = currentEle.closest('.hide');
            if (hiddenParent) {
                hiddenParent.classList.remove('hide');
                hiddenParent.previousElementSibling.classList.remove('close');
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            initHamburger();
            initSectionMenu();
            scrollSectionIntoView();
        });
    </script>
</body>
</html>